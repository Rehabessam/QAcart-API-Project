import { JSON_EXAMPLE } from "utilities/tests/constants";
import Server from "../src/";
// import Server from "../dist/index.esm";

// const server = new Server(JSON_EXAMPLE);
const server = new Server({
  name: "server-test",
  name: "Server Test",
  cors: true,
  config: {
    port: process.env.REACT_APP_SERVER_PORT || 3501,
    type: "rest",
    format: "json",
    request: {
      limit: 20,
    },
  },
  entities: [{
    name: "user",
    alias: "User",
    fields: {
      name: {
        type: "string",
        required: true
      },
      email: {
        type: "string",
        required: true
      },
      password: {
        type: "string",
        required: true
      },
      prefix: "string",
      avatar: "string",
    },
    auth: {
      type: "jwt",
      fields: ["email", "password"],
      secret: "TESTE-SECRET-AUTH",
      permission: {
        "*": {
          insert: true,
          update: true,
          delete: true,
          list: true,
          get: true,
        }
      }
    }
  }, {
    name: "post",
    alias: "Post",
    fields: {
      title: {
        type: "string",
        required: true
      },
      slug: {
        type: "string",
        required: true
      },
      content: {
        type: "object",
        required: true
      },
      banner: {
        type: "file",
        required: true
      },
    }
  }]
});

server.setup({
  request: {
    limit: 5
  }
});

// server.getServerByPort(3501)

server.run();
